# ë©´ì ‘ì„ ìœ„í•œ CS ì „ê³µì§€ì‹ ë…¸íŠ¸ - 1.1 ë””ìì¸íŒ¨í„´

# ì‹±ê¸€í†¤ íŒ¨í„´ (singleton pattern)

> í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì˜¤ì§ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ê°€ì§€ëŠ” íŒ¨í„´
> 
- DB ì—°ê²° ëª¨ë“ˆì— ë§ì´ ì‚¬ìš©
- ğŸ™‚ : ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ ë¹„ìš©ì´ ì¤„ì–´ë“¬
- ğŸ˜Ÿ : ì˜ì¡´ì„±ì´ ë†’ì•„ì§

### JavaScript

```jsx
class Singleton {
    constructor() {
        if (!Singleton.instance) {
            Singleton.instance = this
        }
        return Singleton.instance
    }
    getInstance() {
        return this.instance
    }
}
const a = new Singleton()
const b = new Singleton() 
console.log(a === b) // true
```

- {} ë˜ëŠ” `new Object`ë¡œ ê°ì²´ ìƒì„± â†’ ì–´ë–¤ ê°ì²´ì™€ë„ ê°™ì´ ì•Šê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ íŒ¨í„´ êµ¬í˜„ ê°€ëŠ¥
- `Singleton.instance`ë¼ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§€ëŠ” Singleton í´ë˜ìŠ¤ êµ¬í˜„

## Java

```jsx
class Singleton {
    private static class singleInstanceHolder {
        private static final Singleton INSTANCE = new Singleton();
    }
    public static Singleton getInstance() {
        return singleInstanceHolder.INSTANCE;
    }
}

public class HelloWorld{ 
     public static void main(String []args){ 
        Singleton a = Singleton.getInstance(); 
        Singleton b = Singleton.getInstance(); 
        System.out.println(a.hashCode());
        System.out.println(b.hashCode());  
        if (a == b){
	         System.out.println(true); 
        } 
     }
}
/*
705927765
705927765
true
1. í´ë˜ìŠ¤ì•ˆì— í´ë˜ìŠ¤(Holder), staticì´ë©° ì¤‘ì²©ëœ í´ë˜ìŠ¤ì¸ singleInstanceHolderë¥¼ 
ê¸°ë°˜ìœ¼ë¡œ ê°ì²´ë¥¼ ì„ ì–¸í–ˆê¸° ë•Œë¬¸ì— í•œ ë²ˆë§Œ ë¡œë“œë˜ë¯€ë¡œ ì‹±ê¸€í†¤ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¹ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ë©° 
í´ë˜ìŠ¤ê°€ ë‘ ë²ˆ ë¡œë“œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‘ ìŠ¤ë ˆë“œê°€ ë™ì¼í•œ JVMì—ì„œ 2ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 
ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë™ê¸°í™”, ì¦‰ synchronizedë¥¼ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. 
2. final í‚¤ì›Œë“œë¥¼ í†µí•´ì„œ read only ì¦‰, ë‹¤ì‹œ ê°’ì´ í• ë‹¹ë˜ì§€ ì•Šë„ë¡ í–ˆìŠµë‹ˆë‹¤.
3. ì¤‘ì²©í´ë˜ìŠ¤ Holderë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ í´ë˜ìŠ¤ê°€ ë¡œë“œë  ë•Œ í´ë˜ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì§€ ì•Šê³  
ì–´ë– í•œ ëª¨ë“ˆì—ì„œ getInstance()ë©”ì„œë“œê°€ í˜¸ì¶œí•  ë•Œ ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ìµœì´ˆë¡œ ìƒì„± ë° ë¦¬í„´í•˜ê²Œ ë©ë‹ˆë‹¤. 
*/
```

## ë‹¨ì 

TDD ë•Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ ë¬¸ì œ

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ì„œë¡œ ë…ë¦½ì  + ìˆœì„œ ìƒê´€ ì—†ìŒ

## ì˜ì¡´ì„± ì£¼ì…(DI)

ë””ì»¤í”Œë§ ëœë‹¤ â†’ DIë¡œ ì¸í•´ ì‹±ê¸€í†¤ íŒ¨í„´ì—ì„œ ê°•í•œ ê²°í•©ì„ ëŠìŠ¨í•˜ê²Œ ë§Œë“¦

### ì¥ì 

- ì‰½ê²Œ ëª¨ë“ˆ êµì²´ ê°€ëŠ¥ & ëª¨ë“ˆ ê°„ì˜ ê´€ê³„ ëª…í™•í•´ì§
- í…ŒìŠ¤íŠ¸ & ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ìˆ˜ì›”
- êµ¬í˜„ ì‹œ ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ë„£ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ì²´ë¥¼ ë„£ì–´ ì£¼ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜ì¡´ì„± ë°©í–¥ì´ ì¼ê´€ & ì¶”ë¡ ì´ ì‰¬ì›Œì§

### ë‹¨ì 

ëª¨ë“ˆ ë¶„ë¦¬ â†’ í´ë˜ìŠ¤ ìˆ˜ ì¦ê°€ â†’ ë³µì¡ì„± ì¦ê°€ â†’ ëŸ°íƒ€ì„ íŒ¨ë„í‹°

### DI ì›ì¹™

> ìƒìœ„ ëª¨ë“ˆì€ í•˜ìœ„ ëª¨ë“ˆì—ì„œ ì–´ë– í•œ ê²ƒë„ ê°€ì ¸ì˜¤ì§€ ì•Šì•„ì•¼ í•¨
ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•˜ë©°, ì´ë•Œ ì¶”ìƒí™”ëŠ” ì„¸ë¶€ ì‚¬í•­ì— ì˜ì¡´í•˜ì§€ ë§ì•„ì•¼ í•¨
> 

# íŒ©í† ë¦¬ íŒ¨í„´

> ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì—ì„œ ê°ì²´ ìƒì„± ë¶€ë¶„ì„ ë–¼ì–´ë‚´ ì¶”ìƒí™”í•œ íŒ¨í„´ â†’ ëŠìŠ¨í•œ ê²°í•©
> 
- ìƒìœ„ í´ë˜ìŠ¤ : ì¤‘ìš”í•œ ë¼ˆëŒ€ë¥¼ ê²°ì •
    - ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë°©ì‹ì— ëª°ë¼ë„ ë˜ê¸° ë•Œë¬¸ì— ìœ ì—°ì„± ì¦ê°€
- í•˜ìœ„ í´ë˜ìŠ¤ : ê°ì²´ ìƒì„±ì— ê´€í•œ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ê²°ì •
- ì½”ë“œ ë¦¬íŒ©í„°ë§ ì‰¬ì›Œì ¸ ìœ ì§€ ë³´ìˆ˜ì„± ì¦ê°€

## JavaScript

```jsx
class Latte {
    constructor() {
        this.name = "latte"
    }
}
class Espresso {
    constructor() {
        this.name = "Espresso"
    }
} 

class LatteFactory {
    static createCoffee() {
        return new Latte()
    }
}
class EspressoFactory {
    static createCoffee() {
        return new Espresso()
    }
}
const factoryList = { LatteFactory, EspressoFactory } 
 
class CoffeeFactory {
    static createCoffee(type) {
        const factory = factoryList[type]
        return factory.createCoffee()
    }
}   
const main = () => {
    // ë¼ë–¼ ì»¤í”¼ë¥¼ ì£¼ë¬¸í•œë‹¤.  
    const coffee = CoffeeFactory.createCoffee("LatteFactory")  
    // ì»¤í”¼ ì´ë¦„ì„ ë¶€ë¥¸ë‹¤.  
    console.log(coffee.name) // latte
}
main()
/*
CoffeeFactoryë¥¼ ë³´ë©´ staticìœ¼ë¡œ createCoffee() ì •ì  ë©”ì„œë“œë¥¼ ì •ì˜í•œ ê²ƒì„ ì•Œ
ìˆ˜ ìˆëŠ”ë°, ì •ì  ë©”ì„œë“œë¥¼ ì“°ë©´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½
í•  ìˆ˜ ìˆê³  ê°œë³„ ì¸ìŠ¤í„´ìŠ¤ì— ë¬¶ì´ì§€ ì•Šìœ¼ë©° í´ë˜ìŠ¤ ë‚´ì˜ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆ
ìŠµë‹ˆë‹¤. 
*/
```

- ìƒìœ„ í´ë˜ìŠ¤ : `CoffeeFactory` / í•˜ìœ„ í´ë˜ìŠ¤ : `LatteFactory`
    - ì˜ì¡´ì„± ì£¼ì…
    - `CoffeeFactory`ì—ì„œ `LatteFactory`ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ `LatteFactory`ì—ì„œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ `CoffeeFactory`ì— ì£¼ì…
- `CoffeeFactory` â†’ `static createCoffee()`
    - ì •ì  ë©”ì„œë“œë¥¼ ì“°ë©´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ í˜¸ì¶œì´ ê°€ëŠ¥
        - ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½
        - ê°œë³„ ì¸ìŠ¤í„´ìŠ¤ì— ë¬¶ì´ì§€ ì•Šìœ¼ë©° í´ë˜ìŠ¤ ë‚´ì˜ í•¨ìˆ˜ë¥¼ ì •ì˜ ê°€ëŠ¥

## Java

```jsx
abstract class Coffee { 
    public abstract int getPrice(); 
    
    @Override
    public String toString(){
        return "Hi this coffee is "+ this.getPrice();
    }
}

class CoffeeFactory { 
    public static Coffee getCoffee(String type, int price){
        if("Latte".equalsIgnoreCase(type)) return new Latte(price);
        else if("Americano".equalsIgnoreCase(type)) return new Americano(price);
        else{
            return new DefaultCoffee();
        } 
    }
}
```
class Latte extends Coffee { 
    private int price; 
    
    public Latte(int price){
        this.price=price; 
    }
    @Override
    public int getPrice() {
        return this.price;
    } 
}
class Americano extends Coffee { 
    private int price; 
    
    public Americano(int price){
        this.price=price; 
    }
    @Override
    public int getPrice() {
        return this.price;
    } 
} 
public class HelloWorld{ 
     public static void main(String []args){ 
        Coffee latte = CoffeeFactory.getCoffee("Latte", 4000);
        Coffee ame = CoffeeFactory.getCoffee("Americano",3000); 
        System.out.println("Factory latte ::"+latte);
        System.out.println("Factory ame ::"+ame); 
     }
} 
/*
Factory latte ::Hi this coffee is 4000
Factory ame ::Hi this coffee is 3000
*/
```

`if("Latte".equalsIgnoreCase(type))`

- ë¬¸ìì—´ ë¹„êµ ê¸°ë°˜ ë¡œì§ â†’ `Enum` ë˜ëŠ” `Map`ì„ ì´ìš©í•´ ifë¬¸ì„ ì“°ì§€ ì•Šê³  ë§¤í•‘ ê°€ëŠ¥